<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HTRC Feature Extraction</title>

    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Highlight.js -->
    <link rel="stylesheet" href="bower_components/highlightjs/styles/default.css">
    <script src="bower_components/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
  <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
            </div>
        </div>
    </div>
  <div class="container" style="padding-top:70px">
  <div class="row">
        <div class="col-md-12">
        <!--START INTRO-->
        
<h1 id="page-level-features-from-the-htrc">Page-Level Features From the HTRC</h1>
<p>We feel that a great deal of useful research can be done with pre-calculated features. We are providing all features in json format. The primary precalculated feature that we will be providing is the token (unigram) count, on a per-page basis. In other words, each page will be represented as a collection of pairs where a token is paired with its count on the page. In reality this becomes slightly more complicated because we are also performing part of speech (POS) tagging, and so it is really tokens-as-specific-POS that are being computed.</p>
<p>There is a fair amount of consensus among users that it is important to provide token information at the page level — since it otherwise becomes impossible to separate text from paratext (e.g. thirty pages of publishers’ ads at the back of a book). We have decided to break each page into a collection of three parts: header, body, and footer.</p>
<p>We use an open-source tool (OpenNLP) for tokenizing text and for tagging parts of speech. This will make it possible for users to reconstruct our process, so they can compare data from HathiTrust volumes to volumes they may have locally. We also rejoin words that are broken across a hyphen at the end of a line.</p>
<p>As part of our page representation, we also include two special features: the number of lines on each page, and the number of lines with text. Finally, we will provide a per-page count of characters that start and end lines on each page (this is a case-sensitive list, created before rejoining words broken at a hyphen). This information can illuminate genre and volume structure: for instance, it helps distinguish poetry from prose, and the text from the body that forms an index.</p>
<p>Review <a href="#sample">sample data</a> or jump straight to the <a href="#downloads">downloads</a>.</p>
        
        </div> <!-- END intro col -->
    </div>
    <div class="row">
	    <div class="col-md-6">
            <h2 id="sample">Sample Code</h2>
	    <pre><code>

{
  "id": "39015000225717",
  "pageCount": 88,
  "pages": [
    {
      "pageNumber": 1,
      "headerStats": {
        "tokenCount": 0,
        "lineCount": 0,
        "emptyLineCount": 0,
        "sentenceCount": 0,
        "tokens": {},
        "beginLineChars": {},
        "endLineChars": {}
      },
      "bodyStats": {
        <span class="blah">&nbsp;</span>"tokenCount": 4,
        "lineCount": 4,
        "emptyLineCount": 0,
        "sentenceCount": 1,
        "tokens": {
          "GRAD": {
            "NNP": 1
          },
          "1903": {
            "CD": 1
          }
        },
        "beginLineChars": {
          "1": 1,
          "8": 1
        },
        "endLineChars": {
          "3": 1,
          "8": 1
        }
      },
      "footerStats": {
        "tokenCount": 0,
        "lineCount": 0,
        "emptyLineCount": 0,
        "sentenceCount": 0,
        "tokens": {},
        "beginLineChars": {},
        "endLineChars": {}
      },
      "tokenCount": 4,
      "lineCount": 4,
      "emptyLineCount": 0,
      "sentenceCount": 1
    },
…
{
      "pageNumber": 16,
      "tokenCount": 180,
	…
      "lineCount": 25,
      "emptyLineCount": 0,
      "sentenceCount": 7
    },
	    </code></pre>
	</div> <!-- End example JSON column -->
	<div class="col-md-6">
    <!-- START DOCUMENTATION -->
    
    
<h2 id="documentation">Documentation</h2>
<h3 id="volume">Volume</h3>
<p>The volume represents the current work (e.g. book) as represented in the HathiTrust index.</p>
<p><strong>id</strong>: A unique identifier for the current volume. This is the same identifier used in the HathiTrust and HathiTrust Research Center corpora.</p>
<p><strong>pageCount</strong>: The number of pages in the volume.</p>
<p><strong>pages</strong>: An array of JSON objects, each representing a page of the volume.</p>
<h3 id="page">Page</h3>
<p>Pages are contained within volumes, they have a sequence number, and information about their header, body, and footer.</p>
<h4 id="page-level-information">Page-level information</h4>
<p><strong>seq</strong>: The sequence number. <a href="#page-id">See notes on ID usage</a>.</p>
<p><strong>lineCount</strong>: Number of non-empty lines in the page.</p>
<p><strong>emptyLineCount</strong>: Number of empty lines in the page.</p>
<p><strong>sentenceCount</strong>: Number of sentences identified in the page using OpenNLP. <a href="#sentence-parse">Details on parsing</a>.</p>
<h4 id="header-body-and-footer-information">Header, Body, and Footer information</h4>
<p>The fields for <em>headerStats</em>, <em>bodyStats</em>, and <em>footerStats</em> are the same, but apply to different parts of the page. <a href="#header-q">Read about the differences between the sections</a>.</p>
<p><strong>tokenCount</strong>: The total number of tokens in this page section.</p>
<p><strong>lineCount</strong>: The number of lines containing characters of any kind in this page section. This represents the layout of the page, for sentence counts, see the <em>sentenceCount</em> field.</p>
<p><strong>emptyLineCount</strong>: The number of lines without text in this page section.</p>
<p><strong>sentenceCount</strong>: The number of sentences found in the text in this page section, parsed using OpenNLP.</p>
<p><strong>tokens</strong>: A list of all tokens in this page section characterized by part of speech using OpenNLP. Tokens are case-sensitive. There will be separate counts, for instance, for “rose” (noun) and “rose” (verb), while a capitalized “Rose” is shown as a separate token. Words separated by a hyphen across a line break are rejoined. No other data cleaning or OCR correction was performed. <a href="#token-parse">Details on POS parsing and types of tags used</a>.</p>
<p><strong>beginLineChars</strong>: Count of the initial character of each line in this page section (ignoring whitespace).</p>
<p><strong>endLineChars</strong>: Count of the last character on each line in this page section (ignoring whitespace).</p>


    
	</div> <!-- End short documentation -->
    </div> <!-- End row-->
    <hr />
    <div class="row">
	    <div class="col-md-8">
		    <h2 id="downloads">Download Links</h2>
		    <p class="text-warning">By downloading the archives below, you agree to our <a>Terms of Use</a>.<strong>(placeholder)</strong></p>
		    <p><a><span class="glyphicon glyphicon-compressed"></span> file.bz2</a>
	    </div>
	    <div class="col-md-4">
		    <h2>About the Data</h2>
		    <p>The data provided here represents non-consumptive features of pages from the HathiTrust Research Center public domain dataset.</p>
		    <table class="table">
			    <tr>
				    <td># of pages</td><td>###</td>
			   </tr><tr>
				    <td># of volumes</td><td>###</td>
			   </tr><tr>
				    <td>Years</td><td>1xxx-1xxx</td>
			   </tr>
		    </table>
	    </div>
    </div>
    <div class="row">
	    <div class="col-md-12">
        <!-- START DOCUMENTATION/QUESTION -->

        
        
<h2 id="questions">Questions</h2>
<h3 id="token-parse">How are tokens parsed?</h3>
<p>Hyphenation of tokens at end of line were corrected using custom code. <a href="http://opennlp.apache.org/">Apache OpenNLP</a> was used for sentence segmentation, tokenization, and part of speech (POS) tagging. No additional data cleaning or OCR corrections were performed.</p>
<p>OpenNLP uses <a href="http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html">the Penn Treebank POS tags</a>.</p>
<h3 id="page-id">Can I use the page sequence as an unique identifier?</h3>
<p>The <em>seq</em> value is always sequential from the start. This means that the pages of a volume each have a unique sequence number, but this is specific to the current version of the full text. In theory, updates to the OCR that add or remove pages will change the sequence. The practical likelihood of sequential changes is low, but uses of the page as an id should be cautious.</p>
<p>A future release of this data will include persistent page identifiers that remain unchanged when there are sequential changes.</p>
<h3 id="metadata">Where’s the metadata? Who wrote the book, when is it from, etc.?</h3>
<p>This download only includes <em>features extracted from the full-text pages of volumes</em> in the HTRC collection. For metadata information, such as details about the author, such as author, title, date, and subject classifications, HT and HTRC offer [a metadata API] where you can find more information about the volumes, using the volume <em>id</em> field.</p>
<h3 id="eol">What do I do with beginning- or end-of-line characters?</h3>
<p>The characters at the start and end of a line can be used to differentiate text from <a href="http://en.wikipedia.org/wiki/Paratext">paratext</a> at a page level. For instance, index lines tend to begin with capitalized letters and end with numbers. Likewise, lines in a table of contents can be identified through arabic or roman numerals at the start of a line.</p>
<h3 id="header-q">What is the difference between the header, body, and footer sections?</h3>
<p>Because repeated headers and footers can distort word counts in a document, but also help identify document parts, we attempt to identify repeated lines at the top or bottom of a page and provide separate token counts for those forms of paratext. The “header” and “footer” sections will also include tokens that are page numbers, catchwords, or other short lines at the very top or bottom of a page. Users can of course ignore these divisions by aggregating the token counts for header, body, and footer sections.</p>
<p>The current implementation classifies the part of the page in the following way:</p>
<ul>
<li>if a page has &lt; 3 lines, assume no HEADER or FOOTER</li>
<li>for &gt;= 3 lines, assume that there might be a header and a footer… and in that case, the body would be all the lines except the first and last</li>
<li>compute numCharsBody = max(numCharsPerLine) = max number of characters per line for the body where characters are non-whitespace and non-punctuation</li>
<li>compute numCharsHeader and numCharsFooter as the number of characters where characters are non-whitespace and non-punctuation</li>
<li>if the numCharsHeader &lt; numCharsBody * 0.5 then establish the header as the HEADER</li>
<li>if numCharsFooter &lt; numCharsBody * 0.05, then establish the footer as the FOOTER</li>
</ul>

        

	    </div> <!-- End documentation col-->
    </div> <!-- End documentation row-->
    <hr />
    <div class="row">
	    <div class="col-md-4">
		    <h4>Contact Us</h4>
		    <p>Contact Info</p>
	    </div>
	    <div class="col-md-4">
		    <h4>Tools</h4>
		    <p>TBA<p>
		    <p class="text-muted">If you've built tools or scripts for processing our data, <a>let us know</a>!</p>
	    </div>
	    <div class="col-md-4">
		    <h4>Projects</h4>
		    <p class="text-muted">Let us know about your projects and we'll link to them here.</p>
	    </div>
    </div>

    </div> <!-- End body container-->


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script>$(span:contains("\"tokenCount\"")).css("text-size", 30)</script>
  </div></body>
</html>
